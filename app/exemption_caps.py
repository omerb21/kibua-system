"""
מודול זה מכיל את טבלת התקרות השנתיות לקיבוע זכויות
והפונקציות לחישוב תקרת ההון הפטור
"""

# מיפוי שנה → תקרה חודשית
exemption_caps = {
    2025: 9430,
    2024: 9430,
    2023: 9120,
    2022: 8660,
    2021: 8460,
    2020: 8510,
    2019: 8480,
    2018: 8380,
    2017: 8360,
    2016: 8380,
    2015: 8460,
    2014: 8470,
    2013: 8310,
    2012: 8190
}

def get_exemption_cap_by_year(year: int) -> float:
    """
    מחזיר את התקרה החודשית לפי שנת הזכאות
    אם השנה לא קיימת בטבלה, מחזיר את התקרה של 2025
    """
    return exemption_caps.get(year, exemption_caps[2025])  # ברירת מחדל 2025

def calculate_exempt_capital(year: int) -> float:
    """
    מחשב את תקרת ההון הפטור לפי השנה
    התקרה השנתית = תקרה חודשית * 180 * 0.49
    """
    monthly_cap = get_exemption_cap_by_year(year)
    return monthly_cap * 180 * 0.49
